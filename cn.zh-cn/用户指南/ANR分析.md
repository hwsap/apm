# ANR分析<a name="apm_02_0039"></a>

该功能仅对华北-北京一区域生效。

## 产生背景<a name="section77801644133818"></a>

ANR（Application Not Response）是指应用无响应，当应用在特定的时间内没有完成任务时，系统弹出窗口询问用户选择“强制关闭”（结束发生ANR的应用进程）或者“等待”（等待系统恢复此应用进程）。APP的ANR严重影响用户体验，开发者竭力避免APP的ANR，但是很难复现所有的ANR，部分ANR问题会遗留到用户手机上。当出现ANR时，APM端侧探针通过非侵入式埋点技术采集应用的设备参数和异常信息，并将ANR信息展示在ANR分析页面中。华为云应用性能管理Mobile为您提供ANR统计指标和展示ANR详情的能力，从而快速定位解决APP性能问题，提升用户体验。

## 问题定位<a name="section1183194814402"></a>

如何分析ANR问题？当出现ANR时，先查看日志（ANR时间、进程、ANR类型、CPU使用情况），从追踪文件（trace.txt文件）查看调用的堆栈信息，再查看代码，定位产生ANR的具体原因。

ANR的主要原因：

-   网络因素：网速欠佳，无法达到应用所需的快速响应时间导致ANR；不同网络类型的切换也可能会影响APP的稳定性。

-   CPU满负荷：如果CPU使用量接近100%，说明当前设备很忙，主线程可能被卡住导致ANR。

-   I/O阻塞：如果当前系统中主线程正在进行的I/O（Input/Output）操作被阻塞可能导致ANR。

## 界面说明<a name="section18743217152719"></a>

![](figures/ANR分析界面.png)

## 操作步骤<a name="section152671531113711"></a>

1.  登录应用性能管理。
2.  选择“Mobile \> ANR分析”，进入“ANR分析”界面。
3.  在“ANR分析”页面中，选择应用名称，设置查询时间，单击“查询”。
4.  查看“ANR次数”，展示设置时间段内应用的ANR次数变化趋势。
5.  查看“ANR类型”，展示设置时间段内应用的ANR类型变化趋势。
6.  查看“ANR次数分布”，按照不同的网络类型、应用版本、操作系统和ANR类型统计ANR次数，识别频繁出现ANR的网络类型、应用版本、操作系统和ANR类型，为分析应用无响应原因提供参考依据。
7.  查看“ANR列表”，展示ANR名称、ANR类型、应用版本和ANR次数。
8.  单击“ANR名称”，进入“ANR详情”界面，查看ANR详情。
    -   展示ANR名称、ANR类型、发生ANR的总次数和ANR发现的最近时间。
    -   查看应用无响应视图，展示事件数据（地理位置、网络类型、发生时间）、设备数据（操作系统、设备、设备特征）、APP数据（软件版本、软件包名称、版本编码）。
    -   查看应用的堆栈追踪、线程转储和日志信息。


